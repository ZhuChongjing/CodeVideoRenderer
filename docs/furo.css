:root {
    /* 1. 图标定义 (SVG Data URIs) - 用于标题栏图标 */
    --icon-pencil: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>');
    --icon-abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4zm0 4h16v2H4zm0 4h16v2H4zm0 4h10v2H4z"/></svg>');
    --icon-info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg>');
    --icon-flame: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.8.8 0 0 1-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25zm-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27z"/></svg>');
    --icon-question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10"/></svg>');
    --icon-warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2z"/></svg>');
    --icon-failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg>');
    --icon-spark: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m11.5 20 4.86-9.73H13V4l-5 9.73h3.5zM12 2c2.75 0 5.1 1 7.05 2.95S22 9.25 22 12s-1 5.1-2.95 7.05S14.75 22 12 22s-5.1-1-7.05-2.95S2 14.75 2 12s1-5.1 2.95-7.05S9.25 2 12 2"/></svg>');

    /* 2. 背景与基础颜色 (强制黑暗模式) */
    --color-admonition-title: #651fff;
    --color-admonition-title-background: rgba(101, 31, 255, .2);
    --icon-admonition-default: var(--icon-abstract);
    --admonition-font-size: 0.9rem;
    --admonition-title-font-size: 0.9rem;

    /* 3. 各类型颜色变量 */
    /* Caution (橙) */
    --color-admonition-title--caution: #ff9100;
    --color-admonition-title-background--caution: rgba(255, 145, 0, .2);
    /* Warning (橙) */
    --color-admonition-title--warning: #ff9100;
    --color-admonition-title-background--warning: rgba(255, 145, 0, .2);
    /* Danger (红) */
    --color-admonition-title--danger: #ff5252;
    --color-admonition-title-background--danger: rgba(255, 82, 82, .2);
    /* Attention (红) */
    --color-admonition-title--attention: #ff5252;
    --color-admonition-title-background--attention: rgba(255, 82, 82, .2);
    /* Error (红) */
    --color-admonition-title--error: #ff5252;
    --color-admonition-title-background--error: rgba(255, 82, 82, .2);
    /* Hint (绿) */
    --color-admonition-title--hint: #00c852;
    --color-admonition-title-background--hint: rgba(0, 200, 82, .2);
    /* Tip (绿) */
    --color-admonition-title--tip: #00c852;
    --color-admonition-title-background--tip: rgba(0, 200, 82, .2);
    /* Important (青) */
    --color-admonition-title--important: #00bfa5;
    --color-admonition-title-background--important: rgba(0, 191, 165, .2);
    /* Note (蓝) */
    --color-admonition-title--note: #00b0ff;
    --color-admonition-title-background--note: rgba(0, 176, 255, .2);
    /* Seealso (紫蓝) */
    --color-admonition-title--seealso: #448aff;
    --color-admonition-title-background--seealso: rgba(68, 138, 255, .2);
    /* Todo (灰) */
    --color-admonition-title--admonition-todo: grey;
    --color-admonition-title-background--admonition-todo: hsla(0, 0%, 50%, .2);
}

/* --- Admonition 核心样式 --- */

.admonition,
.topic {
    background: var(--color-admonition-background);
    border-radius: .2rem;
    box-shadow: 0 .2rem .5rem rgba(0, 0, 0, .05), 0 0 .0625rem rgba(0, 0, 0, .1);
    font-size: var(--admonition-font-size);
    margin: 1rem auto;
    overflow: hidden;
    padding: 0 .5rem .5rem;
    page-break-inside: avoid;
    border-left: .2rem solid var(--color-admonition-title);
    color: #fff; /* 确保文字在深色背景下可见 */
}

/* 内容区域的间距调整 */
.admonition>:nth-child(2),
.topic>:nth-child(2) {
    margin-top: 0;
}

.admonition>:last-child,
.topic>:last-child {
    margin-bottom: 0;
}

/* 标题样式 */
.admonition p.admonition-title,
p.topic-title {
    font-size: var(--admonition-title-font-size);
    font-weight: 500;
    line-height: 1.3;
    margin: 0 -.5rem .5rem;
    padding: .4rem .5rem .4rem 2rem;
    position: relative;
    color: #fff; /* 标题文字颜色 */
}

/* 文字样式 */
p.admonition-text {
    font-size: var(--admonition-title-font-size);
    font-weight: 500;
    line-height: 1.3;
    padding: 2px 4px;
    position: relative;
}

/* 标题图标 (Mask Image) */
.admonition p.admonition-title:before,
p.topic-title:before {
    content: "";
    height: 1rem;
    left: .5rem;
    position: absolute;
    width: 1rem;
    background-color: var(--color-admonition-title);
    -webkit-mask-image: var(--icon-admonition-default);
    mask-image: var(--icon-admonition-default);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
}

/* --- 各类型特定样式 --- */

/* Caution */
.admonition.caution { border-left-color: var(--color-admonition-title--caution); }
.admonition.caution>.admonition-title { background-color: var(--color-admonition-title-background--caution); }
.admonition.caution>.admonition-title:before {
    background-color: var(--color-admonition-title--caution);
    -webkit-mask-image: var(--icon-spark);
    mask-image: var(--icon-spark);
}

/* Warning */
.admonition.warning { border-left-color: var(--color-admonition-title--warning); }
.admonition.warning>.admonition-title { background-color: var(--color-admonition-title-background--warning); }
.admonition.warning>.admonition-title:before {
    background-color: var(--color-admonition-title--warning);
    -webkit-mask-image: var(--icon-warning);
    mask-image: var(--icon-warning);
}

/* Danger */
.admonition.danger { border-left-color: var(--color-admonition-title--danger); }
.admonition.danger>.admonition-title { background-color: var(--color-admonition-title-background--danger); }
.admonition.danger>.admonition-title:before {
    background-color: var(--color-admonition-title--danger);
    -webkit-mask-image: var(--icon-spark);
    mask-image: var(--icon-spark);
}

/* Attention */
.admonition.attention { border-left-color: var(--color-admonition-title--attention); }
.admonition.attention>.admonition-title { background-color: var(--color-admonition-title-background--attention); }
.admonition.attention>.admonition-title:before {
    background-color: var(--color-admonition-title--attention);
    -webkit-mask-image: var(--icon-warning);
    mask-image: var(--icon-warning);
}

/* Error */
.admonition.error { border-left-color: var(--color-admonition-title--error); }
.admonition.error>.admonition-title { background-color: var(--color-admonition-title-background--error); }
.admonition.error>.admonition-title:before {
    background-color: var(--color-admonition-title--error);
    -webkit-mask-image: var(--icon-failure);
    mask-image: var(--icon-failure);
}

/* Hint */
.admonition.hint { border-left-color: var(--color-admonition-title--hint); }
.admonition.hint>.admonition-title { background-color: var(--color-admonition-title-background--hint); }
.admonition.hint>.admonition-title:before {
    background-color: var(--color-admonition-title--hint);
    -webkit-mask-image: var(--icon-question);
    mask-image: var(--icon-question);
}

/* Tip */
.admonition.tip { border-left-color: var(--color-admonition-title--tip); }
.admonition.tip>.admonition-title { background-color: var(--color-admonition-title-background--tip); }
.admonition.tip>.admonition-title:before {
    background-color: var(--color-admonition-title--tip);
    -webkit-mask-image: var(--icon-info);
    mask-image: var(--icon-info);
}

/* Important */
.admonition.important { border-left-color: var(--color-admonition-title--important); }
.admonition.important>.admonition-title { background-color: var(--color-admonition-title-background--important); }
.admonition.important>.admonition-title:before {
    background-color: var(--color-admonition-title--important);
    -webkit-mask-image: var(--icon-flame);
    mask-image: var(--icon-flame);
}

/* Note */
.admonition.note { border-left-color: var(--color-admonition-title--note); }
.admonition.note>.admonition-title { background-color: var(--color-admonition-title-background--note); }
.admonition.note>.admonition-title:before {
    background-color: var(--color-admonition-title--note);
    -webkit-mask-image: var(--icon-pencil);
    mask-image: var(--icon-pencil);
}

/* See Also */
.admonition.seealso { border-left-color: var(--color-admonition-title--seealso); }
.admonition.seealso>.admonition-title { background-color: var(--color-admonition-title-background--seealso); }
.admonition.seealso>.admonition-title:before {
    background-color: var(--color-admonition-title--seealso);
    -webkit-mask-image: var(--icon-info);
    mask-image: var(--icon-info);
}

/* Todo */
.admonition.admonition-todo { border-left-color: var(--color-admonition-title--admonition-todo); }
.admonition.admonition-todo>.admonition-title { background-color: var(--color-admonition-title-background--admonition-todo); }
.admonition.admonition-todo>.admonition-title:before {
    background-color: var(--color-admonition-title--admonition-todo);
    -webkit-mask-image: var(--icon-pencil);
    mask-image: var(--icon-pencil);
}
.admonition-todo>.admonition-title { text-transform: uppercase; }

/* --- Version Directives (Dark Mode) --- */

/* 1. 基础容器样式 */
div.versionadded,
div.versionchanged,
div.deprecated,
div.versionremoved {
    margin: 1rem 0;
    padding-left: 0.5rem;
    border-left: 0.2rem solid; /* 核心特征：左侧实线 */
    border-radius: 0.1rem;
    background: transparent;     /* 默认背景透明，保持干净 */
    font-size: 0.9rem;
    line-height: 1.5;
    color: #cfd0d0; /* 基础文字颜色 */
}

/* 内部段落微调 */
div.versionadded p,
div.versionchanged p,
div.deprecated p,
div.versionremoved p {
    margin: 0;
}

/* 2. 关键词高亮 (.versionmodified) */
/* Sphinx 会自动生成 <span class="versionmodified">New in version...:</span> */
.versionmodified {
    font-weight: 600; /* 加粗关键词 */
    padding-right: 0.25rem;
}

/* --- 颜色定义 (Furo Dark Mode Palette) --- */

/* Version Added (绿色) */
div.versionadded {
    border-color: #267334; /* 深绿边框 */
}
div.versionadded .versionmodified {
    color: #3db854; /* 亮绿文字 */
}

/* Version Changed (青色/蓝绿色) */
div.versionchanged {
    border-color: #056d80; /* 深青边框 */
}
div.versionchanged .versionmodified {
    color: #09b0ce; /* 亮青文字 */
}

/* Deprecated (黄色/琥珀色) */
div.deprecated {
    border-color: #6e6407; /* 深黄边框 */
}
div.deprecated .versionmodified {
    color: #b1a10b; /* 亮黄文字 */
}

/* Version Removed (红色) */
div.versionremoved {
    border-color: #b03b3b; /* 深红边框 */
}
div.versionremoved .versionmodified {
    color: #ff7575; /* 亮红文字 */
}